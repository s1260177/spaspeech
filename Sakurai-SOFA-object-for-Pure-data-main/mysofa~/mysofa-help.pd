#N canvas 471 25 1082 755 12;
#X obj 7 7 cnv 15 552 40 empty \$0-pddp.cnv.header mysofa~ 3 12 0 18
-204280 -1 0;
#X obj 226 196 vsl 15 100 0 359 0 0 empty empty Azimuth 0 -9 0 10 -262130
-1 -1 4900 1;
#X floatatom 226 308 5 0 0 1 deg - -;
#X obj 21 182 openpanel;
#X obj 21 161 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X msg 21 205 read -resize \$1 soundfile;
#X obj 21 230 soundfiler;
#N canvas 0 22 450 278 (subpatch) 0;
#X array soundfile 720000 float 2;
#X coords 0 1 720000 -1 200 70 1 0 0;
#X restore 339 383 graph;
#X obj 14 377 tabplay~ soundfile;
#X obj 14 328 bng 15 250 50 0 empty \$0-EOF empty 17 7 0 10 -262144
-1 -1;
#X obj 147 424 mysofa~;
#X msg 36 351 stop;
#X obj 193 467 *~;
#X obj 147 468 *~;
#X floatatom 212 441 5 0 0 0 - - -;
#X text 19 30 Frequency-based convolution filter for SOFA HRIRs;
#X obj 5 541 cnv 3 550 3 empty \$0-pddp.cnv.inlets inlets 8 12 0 13
-228856 -1 0;
#X obj 5 663 cnv 3 550 3 empty \$0-pddp.cnv.outlets outlets 8 12 0
13 -228856 -1 0;
#X obj 4 720 cnv 3 550 3 empty \$0-pddp.cnv.argument more_info 8 12
0 13 -228856 -1 0;
#X obj 83 550 cnv 17 3 17 empty \$0-pddp.cnv.let.0 0 5 9 0 16 -228856
-162280 0;
#X obj 83 672 cnv 17 3 17 empty \$0-pddp.cnv.let.0 0 5 9 0 16 -228856
-162280 0;
#X obj 83 572 cnv 17 3 17 empty \$0-pddp.cnv.let.1 1 5 9 0 16 -228856
-162280 0;
#X text 103 571 float;
#X text 103 671 signal;
#X obj 83 594 cnv 17 3 17 empty \$0-pddp.cnv.let.1 2 5 9 0 16 -228856
-162280 0;
#X obj 84 692 cnv 17 3 17 empty \$0-pddp.cnv.let.0 1 5 9 0 16 -228856
-162280 0;
#X text 104 691 signal;
#X obj 83 616 cnv 17 3 17 empty \$0-pddp.cnv.let.1 3 5 9 0 16 -228856
-162280 0;
#X text 103 593 float;
#X text 103 616 float;
#X text 103 549 symbol and signal;
#X text 225 550 - path to SOFA file and signal;
#X text 172 671 - convolved signal for the left channel;
#X text 141 571 - azimuth (0..360 deg.);
#X text 140 594 - elevation (-90..90 deg.), f 64;
#X text 141 616 - distance (20..160 cm);
#X text 173 690 - convolved signal for the right channel;
#X text 90 723 https://onkyo.u-aizu..ac.jp/~julian;
#X obj 129 401 bng 15 250 50 0 \$0-EOF empty empty 17 7 0 10 -262144
-1 -1;
#X obj 249 415 hsl 64 15 0 1 0 0 empty empty level -2 -8 0 10 -262144
-1 -1 6300 1;
#X text 45 158 1) Select audio file;
#X msg 322 475 \; pd dsp 1;
#X obj 255 443 moses 0;
#X msg 250 475 \; pd dsp 0;
#X text 17 52 [mysofa~] outputs the convolution of a monaural signal
(first inlet) with the HRIR measurements from a SOFA file (first inlet
\, too) \, depending on the azimuth and distance of the loudspeakers
(last three inlets). Distance is not yet implemented in the SOFA standard.
NOTE: Make sure that the SOFA file and Pd have the same sampling rate
, f 76;
#X obj 313 196 vsl 15 100 0 359 0 0 empty empty Speakerazi(Sofaazi)
0 -9 0 10 -203904 -1 -1 2500 1;
#X floatatom 313 308 5 0 0 1 deg - -;
#X obj 84 638 cnv 17 3 17 empty \$0-pddp.cnv.let.1 4 5 9 0 16 -228856
-162280 0;
#X text 104 638 float;
#X text 142 638 - speaker_azimuth (0..180 deg.);
#X text 4 305 2) play;
#X text 223 158 3) Adjust coordinates;
#X obj 147 505 dac~ 2 1;
#X obj 22 521 tabwrite~ leftIR;
#X obj 230 522 tabwrite~ rightIR;
#N canvas 0 22 450 278 (subpatch) 0;
#X array leftIR 100 float 3;
#A 0 0.0323262 0.0333713 0.0340804 0.0345841 0.0347803 0.0342249 0.0335143
0.0327128 0.0315445 0.0301804 0.0289006 0.0278225 0.0267252 0.0259108
0.0252766 0.02463 0.024448 0.0243677 0.0241819 0.0237048 0.0230752
0.0230714 0.022972 0.0225048 0.0217481 0.0207746 0.0201434 0.0194366
0.018643 0.0176801 0.0162341 0.0146974 0.0133423 0.0121151 0.0105559
0.00913161 0.00795363 0.00633817 0.00512391 0.00427682 0.00343711 0.00308217
0.00266718 0.00239711 0.00240559 0.00219339 0.00196262 0.00157388 0.00115406
0.000518067 -0.000780737 -0.00204792 -0.00296101 -0.00368879 -0.00420548
-0.00448788 -0.00448844 -0.00439481 -0.00404455 -0.00357307 -0.00325962
-0.00309036 -0.00375732 -0.00484442 -0.00600072 -0.00735814 -0.00826282
-0.00920389 -0.0100264 -0.0104956 -0.0106477 -0.00993926 -0.00964869
-0.0100243 -0.0104758 -0.0112828 -0.0124462 -0.0141889 -0.0160347 -0.0178921
-0.0197093 -0.0211325 -0.0222459 -0.0228166 -0.0232872 -0.023535 -0.0235403
-0.0239052 -0.0239127 -0.0239896 -0.024548 -0.0251227 -0.0255638 -0.0255963
-0.0256502 -0.0254308 -0.0248514 -0.0242007 -0.0232235 -0.0223685;
#X coords 0 1 100 -1 200 140 1;
#X restore 602 153 graph;
#N canvas 0 22 450 278 (subpatch) 0;
#X array rightIR 100 float 3;
#A 0 -0.0086322 -0.00928175 -0.00982229 -0.0104009 -0.0108505 -0.0109143
-0.010848 -0.0107699 -0.0104951 -0.00997349 -0.00939385 -0.00897947
-0.00863669 -0.00834404 -0.00817818 -0.00811078 -0.00815977 -0.00817465
-0.00810631 -0.00792196 -0.00764191 -0.00756031 -0.00750497 -0.00721061
-0.0067853 -0.00643423 -0.00621805 -0.0060051 -0.00575615 -0.00545635
-0.00511774 -0.00478006 -0.0043967 -0.00392972 -0.00333443 -0.00265404
-0.00196105 -0.00123247 -0.000537746 1.74364e-05 0.000358035 0.000558219
0.000735509 0.00075593 0.000642943 0.000504254 0.000332558 0.00023513
0.000166392 0.000171745 0.000396207 0.000720345 0.000960056 0.00108667
0.00111351 0.00102309 0.000878201 0.00063256 0.000259366 -0.000110241
-0.000390212 -0.000495945 -0.000343419 -6.23252e-05 0.000248125 0.000588378
0.000812458 0.000987021 0.00110189 0.00102556 0.000760822 0.000274987
-7.33773e-05 -0.000164136 -0.000287697 -0.00038761 -0.000271646 0.000117515
0.000650611 0.00122875 0.0017912 0.00235292 0.00299592 0.00353944 0.00389348
0.00420919 0.00463265 0.00507891 0.00525453 0.00537546 0.00568675 0.00600433
0.00614006 0.00606806 0.00608049 0.0062363 0.00630908 0.00626266 0.0062827
0.0063552;
#X coords 0 1 100 -1 200 140 1;
#X restore 603 354 graph;
#X obj 35 424 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X connect 1 0 2 0;
#X connect 2 0 10 1;
#X connect 2 0 57 0;
#X connect 3 0 5 0;
#X connect 4 0 3 0;
#X connect 5 0 6 0;
#X connect 8 0 10 0;
#X connect 8 1 38 0;
#X connect 9 0 8 0;
#X connect 10 0 13 0;
#X connect 10 1 12 0;
#X connect 11 0 8 0;
#X connect 12 0 52 1;
#X connect 12 0 54 0;
#X connect 13 0 52 0;
#X connect 13 0 53 0;
#X connect 14 0 13 1;
#X connect 14 0 12 1;
#X connect 39 0 14 0;
#X connect 39 0 42 0;
#X connect 42 0 43 0;
#X connect 42 1 41 0;
#X connect 45 0 46 0;
#X connect 46 0 10 2;
#X connect 46 0 57 0;
#X connect 57 0 53 0;
#X connect 57 0 54 0;
